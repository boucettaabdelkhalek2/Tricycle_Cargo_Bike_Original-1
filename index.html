name: Validate Project Structure

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    name: Full Validation
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ”„ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ›  Install PyYAML
        run: pip install pyyaml

      - name: ğŸ“„ Validate metadata.yml
        run: |
          python3 -c "import yaml; yaml.safe_load(open('metadata.yml'))"

      - name: ğŸ“¦ Check Essential Files
        run: |
          for file in README.md LICENSE metadata.yml; do
            if [ ! -f "$file" ]; then
              echo "âŒ Missing: $file"
              exit 1
            fi
          done
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† index.html Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯ web
          if [ ! -f "web/index.html" ]; then
            echo "âŒ Missing: web/index.html"
            exit 1
          fi

      - name: ğŸ§± List CAD Files
        run: |
          echo "ğŸ“‚ CAD files:"
          find CAD -type f || echo "No CAD folder found."

      - name: ğŸ“‘ List PDF Documents
        run: |
          echo "ğŸ“‚ PDF files in docs/:"
          find docs -name '*.pdf' || echo "No PDF files found."

      - name: ğŸ–¼ Show Images and Videos
        run: |
          echo "ğŸ–¼ Images:"
          find images -type f || echo "No images found."
          echo "ğŸ¥ Videos:"
          find videos -type f || echo "No videos found."

      - name: ğŸŒ Validate Web Page
        run: |
          if [ -f "web/index.html" ]; then
            echo "âœ… web/index.html found."
          else
            echo "âŒ web/index.html is missing."
            exit 1
          fi

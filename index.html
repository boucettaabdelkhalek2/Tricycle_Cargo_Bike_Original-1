name: Validate Project Structure

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    name: Full Validation
    runs-on: ubuntu-latest

    steps:
      - name: 🔄 Checkout Repository
        uses: actions/checkout@v4

      - name: 🛠 Install PyYAML
        run: pip install pyyaml

      - name: 📄 Validate metadata.yml
        run: |
          python3 -c "import yaml; yaml.safe_load(open('metadata.yml'))"

      - name: 📦 Check Essential Files
        run: |
          for file in README.md LICENSE metadata.yml; do
            if [ ! -f "$file" ]; then
              echo "❌ Missing: $file"
              exit 1
            fi
          done
          # التحقق من index.html داخل مجلد web
          if [ ! -f "web/index.html" ]; then
            echo "❌ Missing: web/index.html"
            exit 1
          fi

      - name: 🧱 List CAD Files
        run: |
          echo "📂 CAD files:"
          find CAD -type f || echo "No CAD folder found."

      - name: 📑 List PDF Documents
        run: |
          echo "📂 PDF files in docs/:"
          find docs -name '*.pdf' || echo "No PDF files found."

      - name: 🖼 Show Images and Videos
        run: |
          echo "🖼 Images:"
          find images -type f || echo "No images found."
          echo "🎥 Videos:"
          find videos -type f || echo "No videos found."

      - name: 🌐 Validate Web Page
        run: |
          if [ -f "web/index.html" ]; then
            echo "✅ web/index.html found."
          else
            echo "❌ web/index.html is missing."
            exit 1
          fi
